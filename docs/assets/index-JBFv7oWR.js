(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function L(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=L(e);fetch(e.href,o)}})();const b="/disco-flight/assets/disco-music-4RV96TdM.mp3",_="/disco-flight/assets/explosion-BVY2a1Az.mp3",f=45,P=30,N=5,q=1,F=3e3,G=.05,R=-.8;let c="welcome",r=0,E=0,p=0,u=!1,d=null,S=Date.now(),v=0,a,i,m;const g=new Audio(b),x=new Audio(_),V=document.getElementById("welcome-screen"),H=document.getElementById("orientation-screen"),w=document.getElementById("game-screen"),W=document.getElementById("gameover-screen"),A=document.getElementById("start-button"),M=document.getElementById("restart-button"),y=document.querySelector("#sky-video"),I=document.querySelector("#copilot"),$=document.getElementById("detection-bar"),O=document.createElement("div");O.id="debug-window";O.style.display="none";document.body.appendChild(O);function l(t){[V,H,w,W].forEach(n=>{n.classList.add("hidden")}),document.getElementById(t).classList.remove("hidden")}function B(){var t;return window.innerHeight>window.innerWidth?(l("orientation-screen"),c==="playing"&&(y.pause(),a&&i.stop()),!1):(((t=document.getElementById("orientation-screen"))==null?void 0:t.classList.contains("hidden"))===!1&&(c==="playing"?(l("game-screen"),y.play(),a&&(i=a.createOscillator(),i.connect(m),i.type="sawtooth",i.start())):l(c==="welcome"?"welcome-screen":"gameover-screen")),!0)}function X(){const t=p/P*100;$.style.setProperty("--detection-percentage",`${t}%`)}function Y(){u||(u=!0,w.classList.add("disco-mode"),g.currentTime=0,g.play(),d&&clearTimeout(d),d=window.setTimeout(()=>{D()},N*1e3))}function D(){u&&(u=!1,w.classList.remove("disco-mode"),g.pause(),g.currentTime=0,d&&(clearTimeout(d),d=null))}function k(){i.frequency.value=100+r/f*50}function z(){const t=Date.now();if(t-S>F){const n=f*.7;E=Math.random()*n*2-n,S=t}r+=(E-r)*G}function K(){const t=Math.abs(r)/f,n=q*t;let s=parseFloat(I.style.left)||50;if(r!==0){const e=r>0?1:-1;s+=e*n}if(v!==0){const e=v/f*R;s-=e}s=Math.max(10,Math.min(90,s)),I.style.left=`${s}%`,(s<=10||s>=90)&&Y()}function C(){B()&&c==="playing"&&(z(),K(),k(),u&&(p+=1/60,X(),p>=P&&(c="gameover",J())),y.style.transform=`rotate(${-r}deg)`,requestAnimationFrame(C))}function j(t){c==="playing"&&(v=t.beta||0)}function T(){B()&&(c="playing",p=0,r=0,E=0,u=!1,a=new AudioContext,i=a.createOscillator(),m=a.createGain(),i.connect(m),m.connect(a.destination),i.type="sawtooth",m.gain.value=.1,l("game-screen"),y.play(),i.start(),C())}function J(){c="gameover",l("gameover-screen"),D(),i.stop(),x.play(),setTimeout(()=>{M.classList.remove("hidden")},5e3)}A.addEventListener("click",T);M.addEventListener("click",T);window.addEventListener("deviceorientation",j);document.addEventListener("DOMContentLoaded",()=>{l("welcome-screen"),typeof DeviceOrientationEvent.requestPermission=="function"&&A.addEventListener("click",async()=>{try{await DeviceOrientationEvent.requestPermission()==="granted"&&T()}catch(t){console.error("Permission denied:",t)}})});
//# sourceMappingURL=index-JBFv7oWR.js.map
